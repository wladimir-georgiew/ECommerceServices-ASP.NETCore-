<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
@using FastServices.Data.Models
@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager
@model ICollection<FastServices.Web.ViewModels.Home.DepartmentViewModel>

<style>
    .topImageNav {
        background: linear-gradient( rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7) ), url('/Template/images/indexBg-1.jpg');
        background-size: 100%;
        background-attachment: fixed;
        color: white;
    }
</style>


@if (!this.SignInManager.IsSignedIn(this.User))
{
    <!-- banner -->
    <!-- banner-slider -->
    <div class="w3l_banner_info">
        <div class="slider">
            <div class="callbacks_container">
                <ul class="rslides" id="slider3">
                    <li>
                        <div class="slider-img">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">Welcome!</h3>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="slider-img-2">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">WeProvideTheBestServices!</h3>
                                </div>

                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="slider-img-3">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">Enjoy Your Stay!</h3>
                                </div>

                            </div>
                        </div>
                    </li>

                </ul>
            </div>
        </div>
    </div>
    <!-- //banner-slider -->
}
else
{
    <div class="topImageNav">
        <div class="slider_banner_info">
        </div>
    </div>
}

<vc:departments-pop-up dep-name="Plumbing"></vc:departments-pop-up>


<h1 style="text-align:center; margin-bottom:1em">Departments</h1>
<div class="container">
    <div class="row">
        @foreach (var department in @Model)
        {
        <a href="/Departments/Department?id=@department.Id">
            <div class="col-md-4 col-sm-12 w3_ban1">
                <div style="border:double 3px"  class="card">
                    <img class="card-img-top" style="height: 225px; " src="@department.CardImgSrc" alt="Card image cap">
                    <div class="card-body" style="height: 230px">
                        <h5 class="card-title">@department.Name</h5>
                        <p class="card-text">@department.Description.</p>
                        <a style="visibility:hidden"></a>
                    </div>
                </div>
            </div>
        </a>
        }
    </div>
</div>


<script type="text/javascript">
    var words = document.getElementsByClassName('word');
    var wordArray = [];
    var currentWord = 0;

    words[currentWord].style.opacity = 1;
    for (var i = 0; i < words.length; i++) {
        splitLetters(words[i]);
    }

    function changeWord() {
        var cw = wordArray[currentWord];
        var nw = currentWord == words.length - 1 ? wordArray[0] : wordArray[currentWord + 1];

        setTimeout(function () {
            for (var i = 0; i < cw.length; i++) {
                animateLetterOut(cw, i);
            }
        }, 1500);


        for (var i = 0; i < nw.length; i++) {
            nw[i].className = 'letter behind';
            nw[0].parentElement.style.opacity = 1;
            animateLetterIn(nw, i);
        }

        currentWord = (currentWord == wordArray.length - 1) ? 0 : currentWord + 1;
    }

    function animateLetterOut(cw, i) {
        setTimeout(function () {
            cw[i].className = 'letter out';
        }, i * 80);
    }

    function animateLetterIn(nw, i) {
        setTimeout(function () {
            nw[i].className = 'letter in';
        }, 340 + (i * 80));
    }

    function splitLetters(word) {
        var content = word.innerHTML;
        word.innerHTML = '';
        var letters = [];
        for (var i = 0; i < content.length; i++) {
            var letter = document.createElement('span');
            letter.className = 'letter';
            letter.innerHTML = content.charAt(i);
            word.appendChild(letter);
            letters.push(letter);
        }

        wordArray.push(letters);
    }

    changeWord();
    setInterval(changeWord, 4000);

</script>
