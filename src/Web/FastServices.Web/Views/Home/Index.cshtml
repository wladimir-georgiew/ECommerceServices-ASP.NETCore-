<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
@using FastServices.Data.Models
@using Microsoft.AspNetCore.Identity

@inject SignInManager<ApplicationUser> SignInManager
@model ICollection<FastServices.Web.ViewModels.Home.IndexViewModel>

<style>
    h3 {
        text-indent: 4px;
    }

    h5 {
        font-family: sans-serif;
        font-size:13px;
    }

    p {
        font-family: 'Myanmar Text'
    }
</style>

@if (!this.SignInManager.IsSignedIn(this.User))
{
    <!-- banner -->
    <!-- banner-slider -->
    <div class="w3l_banner_info">
        <div class="slider">
            <div class="callbacks_container">
                <ul class="rslides" id="slider3">
                    <li>
                        <div class="slider-img">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">Fast Services Web!</h3>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="slider-img-2">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">We Are The Best!</h3>
                                </div>

                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="slider-img-3">
                            <div class="slider_banner_info">
                                <div class="text">
                                    <h3 class="word wisteria">Enjoy Your Stay!</h3>
                                </div>

                            </div>
                        </div>
                    </li>

                </ul>
            </div>
        </div>
    </div>
    <!-- //banner-slider -->
}
else
{
    <div class="topImageNav">

        <h1 class="titleText"> @("Departments".ToUpperInvariant()) </h1>
    </div>
}
<section class="bannerbottom py-lg-5 py-md-4 py-md-3 py-2">
    <div class="bannerbottom py-lg-5 py-md-4 py-md-3 py-2">
        <div style="margin-top:1em;" class="container">
            <div class="row">
                @foreach (var department in @Model)
                {
                    <a asp-controller="Departments" asp-action="Department" asp-route-depId="@department.Id">
                        <div class="col-md-4 col-sm-12 w3_ban1">
                            <div class="card">
                                <img class="card-img-top" style="height: 225px; " src="@department.CardImgSrc" alt="Card image cap">
                                <div class="card-body" style="min-height: 150px">
                                    <h5 class="card-title">@department.Name</h5>
                                    @for (int i = 0; i < department.Rating; i++)
                                    {
                                        <i style="color:#FFB300;" class="fa fa-star" aria-hidden="true"></i>
                                    }
                                    <p class="card-text">@department.Description.</p>
                                    <a style="visibility:hidden"></a>
                                </div>
                            </div>
                        </div>
                    </a>
                }
            </div>
        </div>
    </div>
</section>


<script type="text/javascript">
    var words = document.getElementsByClassName('word');
    var wordArray = [];
    var currentWord = 0;

    words[currentWord].style.opacity = 1;
    for (var i = 0; i < words.length; i++) {
        splitLetters(words[i]);
    }

    function changeWord() {
        var cw = wordArray[currentWord];
        var nw = currentWord == words.length - 1 ? wordArray[0] : wordArray[currentWord + 1];

        setTimeout(function () {
            for (var i = 0; i < cw.length; i++) {
                animateLetterOut(cw, i);
            }
        }, 1500);


        for (var i = 0; i < nw.length; i++) {
            nw[i].className = 'letter behind';
            nw[0].parentElement.style.opacity = 1;
            animateLetterIn(nw, i);
        }

        currentWord = (currentWord == wordArray.length - 1) ? 0 : currentWord + 1;
    }

    function animateLetterOut(cw, i) {
        setTimeout(function () {
            cw[i].className = 'letter out';
        }, i * 80);
    }

    function animateLetterIn(nw, i) {
        setTimeout(function () {
            nw[i].className = 'letter in';
        }, 340 + (i * 80));
    }

    function splitLetters(word) {
        var content = word.innerHTML;
        word.innerHTML = '';
        var letters = [];
        for (var i = 0; i < content.length; i++) {
            var letter = document.createElement('span');
            letter.className = 'letter';
            letter.innerHTML = content.charAt(i);
            word.appendChild(letter);
            letters.push(letter);
        }

        wordArray.push(letters);
    }

    changeWord();
    setInterval(changeWord, 4000);

</script>
